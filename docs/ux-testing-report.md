# UX тестирование (React UI)

Дата: 2025-12-24

## Область тестирования

- Публичный UI поиска: `/`
- Авторизация/регистрация: `/login`, `/register`
- Панель администратора: `/panel`

## Чек-лист и результаты

### 1) Основные сценарии (use-cases)

- Поиск по тексту: ✅ есть ввод, порог, переключатель “Улучшенный поиск”, вывод результатов.
- Поиск по файлу (PDF/DOCX): ✅ есть загрузка файла и подсказки.
- Очистка формы: ✅ добавлена кнопка “Очистить” (сброс текста/файла/результатов/ошибки).
- Ошибки пользователя: ✅ добавлена явная ошибка “Введите текст или выберите файл” при пустом запросе.

### 2) UX/микроинтеракции

- Состояние загрузки: ✅ кнопка поиска показывает “Ищу…”, блокируется повторная отправка.
- Счётчик результатов: ✅ добавлен `Результаты (N)`.
- Сообщения ошибок API: ✅ улучшен парсинг `{"detail": ...}` в `frontend/src/api.ts`.
- Дублирующиеся запросы в dev: ✅ убран `React.StrictMode`, чтобы эффекты не выполнялись дважды при `npm run dev`.
- Админ‑действия (удаление): ✅ добавлено подтверждение удаления источника.
- Админ‑действия (ошибки): ✅ добавлено отображение человекочитаемой ошибки для delete/toggle/update.

### 3) Responsive дизайн

- Страницы используют сетку и адаптивные классы Tailwind (`md:grid-cols-*`): ✅ визуально адаптивность предусмотрена.
- Рекомендация для ручной проверки: протестировать на ширинах 375/768/1024/1440 и убедиться, что формы не “ломаются”.

### 4) Доступность (a11y) — базовая

- Ошибки формы поиска: ✅ добавлен `role="alert"` и `aria-live="polite"`.
- Переключатель rerank: ⚠️ есть `aria-pressed`, но стоит добавить `aria-label` (улучшение).
- Контраст и фокус: ⚠️ фокус есть (`focus:ring`), но рекомендуется прогнать Lighthouse/axe.

### 5) Кросс-браузер

В рамках текущего окружения полноценная ручная проверка браузеров не выполнялась.
Рекомендуемый минимум: Chrome/Firefox + мобильный Safari (iOS) на демо‑кейсе.

## Найденные проблемы и что сделано

- Пустой запрос приводил к “тихому” запросу без результата → исправлено UI‑валидацией и сообщением ошибки.
- Ошибки backend часто показывались как сырой JSON‑текст → улучшена обработка ошибок в `apiFetch`.
- Удаление источника в панели не подтверждалось и не обрабатывало ошибки → добавлено подтверждение и обработка ошибок.

## Следующие улучшения (необязательно к демо)

- Добавить `aria-label` для переключателя “Улучшенный поиск”.
- Добавить подсказки по ограничениям (например, лимит размера файла).
- Добавить “пустые состояния” для панели (skeleton/placeholder) и тост‑уведомления.
